{
  "comments": [
    {
      "key": {
        "uuid": "14435e68_8ba5ae55",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/ApexEngineHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-04-15T13:15:43Z",
      "side": 1,
      "message": "should remove those that are already \"running\"",
      "range": {
        "startLine": 98,
        "startChar": 45,
        "endLine": 98,
        "endChar": 57
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06d2d150_e07f75cf",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/ApexEngineHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-04-15T13:38:39Z",
      "side": 1,
      "message": "Agreed! and just making this change will not be enough! this will require some improvements.",
      "parentUuid": "14435e68_8ba5ae55",
      "range": {
        "startLine": 98,
        "startChar": 45,
        "endLine": 98,
        "endChar": 57
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a51968b_9ef362d1",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/ApexEngineHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 2787
      },
      "writtenOn": "2021-04-15T12:20:35Z",
      "side": 1,
      "message": "So we\u0027re changing from setting the full list of policies to deploy to doing a delta?\n\nSo if an existing policy is not on either the polsToDeploy or polsToUndeploy lists, it now stays deployed?",
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "550e0cc2_51cfa64e",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/ApexEngineHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 6722
      },
      "writtenOn": "2021-04-15T12:30:38Z",
      "side": 1,
      "message": "That\u0027s correct. \n\nPAP now does the filtering of the policies to eliminate the need for the PDPs to do this any longer. PDPs now just know about the policies to either deploy or undeploy. \n\nSo yes - if a policy is not on either of the deploy or undeploy lists it will remain deployed and untouched.",
      "parentUuid": "6a51968b_9ef362d1",
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0d07edea_9ecfcd91",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/ApexEngineHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 99,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-04-15T13:15:43Z",
      "side": 1,
      "message": "should remove those that are not \"running\", or add a null check after line 102",
      "range": {
        "startLine": 99,
        "startChar": 58,
        "endLine": 99,
        "endChar": 72
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "709cc253_bdfc323c",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-04-15T13:15:43Z",
      "side": 1,
      "message": "we have a design decision to make here - do we return:\n1) the policies that were touched (i.e., both deployed and undeployed); or\n2) the complete list of running policies; or\n3) just those that are being deployed\n#1 and #3 result in shorter response messages and are sufficient for PAP to determine if the PDP did what was requested.  However, it would be insufficient for PAP to address any inconsistencies until the next heartbeat is sent.  This might also be an issue if we support multiple PAPs.\nNote: the current PAP code expects #2",
      "range": {
        "startLine": 100,
        "startChar": 37,
        "endLine": 100,
        "endChar": 53
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4edbe89c_c064b223",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-04-15T13:33:38Z",
      "side": 1,
      "message": "This particular setting will in effect have the list of policies going back in the heartbeat and in response (when the state is PASSIVE).\nSo, keeping this single list having both policies to be deployed+undeployed doesn\u0027t make sense.\nEither separate lists should be sent to PAP(maybe sensible only when sending a response PDPStatus), or only the deployed ones(maybe sensible in case of heartbeats) should be sent.",
      "range": {
        "startLine": 100,
        "startChar": 8,
        "endLine": 100,
        "endChar": 55
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cffc158_e48eceb2",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-04-15T13:15:43Z",
      "side": 1,
      "message": "doesn\u0027t this registry entry need to be the complete list of policies?",
      "range": {
        "startLine": 102,
        "startChar": 16,
        "endLine": 102,
        "endChar": 54
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44a53d7c_b0134643",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-04-15T14:27:29Z",
      "side": 1,
      "message": "When there are policies that are to be deployed in APEX-PDP, and the state is now changing from PASSIVE to ACTIVE, then this list is used, so this should be okay.",
      "parentUuid": "9cffc158_e48eceb2",
      "range": {
        "startLine": 102,
        "startChar": 16,
        "endLine": 102,
        "endChar": 54
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0cb8a032_7dcc53cb",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-04-15T14:30:20Z",
      "side": 1,
      "message": "what if two PDP-UPDATE messages are processed before an ACTIVATE message is processed?",
      "parentUuid": "44a53d7c_b0134643",
      "range": {
        "startLine": 102,
        "startChar": 16,
        "endLine": 102,
        "endChar": 54
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "316246b3_30b35102",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-04-15T15:32:24Z",
      "side": 1,
      "message": "Oh yes, when you mentioned complete list, I thought deployed+undeployed list.\nAgreed, this should be what is already there in the registry+policiesToBeDeployed received in the current PDPUPDATE",
      "parentUuid": "0cb8a032_7dcc53cb",
      "range": {
        "startLine": 102,
        "startChar": 16,
        "endLine": 102,
        "endChar": 54
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cf75a181_96d491b2",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-04-15T13:33:38Z",
      "side": 1,
      "message": "this is wrong. say for e.g. already 3 policies are running, and in the PDPUPdate msg, all 3 are in policiesToBeUndeployed list, then this if statement should essentially be true.",
      "range": {
        "startLine": 143,
        "startChar": 12,
        "endLine": 144,
        "endChar": 69
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f6e206c_6fa715b1",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 147,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-04-15T13:15:43Z",
      "side": 1,
      "message": "I assume it\u0027s ok to invoke this, even if it\u0027s already running.",
      "range": {
        "startLine": 147,
        "startChar": 33,
        "endLine": 147,
        "endChar": 63
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66b451fa_a0fda706",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-04-15T13:33:38Z",
      "side": 1,
      "message": "this will not be sufficient anymore for this condition, as there could be only some undeployments that failed and that will have to be captured in the message.",
      "range": {
        "startLine": 183,
        "startChar": 16,
        "endLine": 185,
        "endChar": 72
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8958aa07_d8ef43eb",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 231,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-04-15T13:15:43Z",
      "side": 1,
      "message": "this logic doesn\u0027t seem quite right - seems like the context won\u0027t necessarily be equal to both the deployed and the undeployed list",
      "range": {
        "startLine": 229,
        "startChar": 16,
        "endLine": 231,
        "endChar": 99
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6d45840_2c0af45d",
        "filename": "services/services-onappf/src/main/java/org/onap/policy/apex/services/onappf/handler/PdpUpdateMessageHandler.java",
        "patchSetId": 2
      },
      "lineNbr": 231,
      "author": {
        "id": 4903
      },
      "writtenOn": "2021-04-15T13:33:38Z",
      "side": 1,
      "message": "this is not correct as well. the request is already handled only if the policiesToBedeployed are already deployed in the engine \u0026\u0026 policiesToBeUndeployed are not deployed in the engine",
      "range": {
        "startLine": 229,
        "startChar": 19,
        "endLine": 231,
        "endChar": 99
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47449ee4_9fad3d62",
        "filename": "services/services-onappf/src/test/java/org/onap/policy/apex/services/onappf/comm/TestPdpStateChangeListener.java",
        "patchSetId": 2
      },
      "lineNbr": 127,
      "author": {
        "id": 811
      },
      "writtenOn": "2021-04-15T13:15:43Z",
      "side": 1,
      "message": "will it compile if \"\u003c\u003e\" is used on lines 127 \u0026 128?\n\nsame question for cases below",
      "range": {
        "startLine": 127,
        "startChar": 74,
        "endLine": 127,
        "endChar": 85
      },
      "revId": "91cb26e792ec214717fac4d1697db9a4116838a6",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}